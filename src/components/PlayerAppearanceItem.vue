<script setup lang="ts">
import { InputNumber, Checkbox, Button } from 'primevue'
import type { Appearance } from '@/types'

type AppearanceWithName = Appearance & { playerName: string }

const props = defineProps<{
  editing: boolean
  deletePlayer: (appearance: AppearanceWithName) => void
}>()

const appearance = defineModel<AppearanceWithName>('appearance')
</script>

<template>
  <div v-if="appearance" class="flex items-center justify-between bg-white shadow rounded p-4">
    <div class="flex flex-col">
      <router-link
        :to="{ name: 'playerDetail', params: { id: appearance.playerId } }"
        class="font-medium text-primary"
      >
        {{ appearance.playerName }}
      </router-link>
    </div>

    <div v-if="!props.editing" class="flex items-center gap-4 text-2xl">
      <span v-if="appearance.goals && appearance.goals > 0">
        <span v-for="n in appearance.goals" :key="n">âš½</span>
      </span>
      <span v-if="appearance.isGoalkeeper">ðŸ§¤</span>
    </div>

    <div v-else class="flex items-center gap-4">
      <label>{{ $t('common.goal', 2) }}</label>
      <InputNumber v-model.number="appearance.goals" :min="0" show-buttons />

      <label>{{ $t('common.wasKeeper') }}</label>
      <Checkbox v-model="appearance.isGoalkeeper" binary />

      <Button
        icon="pi pi-trash"
        severity="danger"
        size="small"
        @click="props.deletePlayer(appearance)"
      />
    </div>
  </div>
</template>
